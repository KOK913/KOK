const express = require('express');
const mongoose = require('mongoose');
const bodyParser = require('body-parser');
const cors = require('cors');

const app = express();
const port = process.env.PORT || 3000;

app.use(cors());
app.use(bodyParser.json());

// MongoDB接続設定
mongoose.connect('mongodb://localhost:27017/quiz-app', {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});

// モデルとルートのインポート
require('./models/Question');
require('./models/User');
app.use('/api', require('./routes/api'));

app.listen(port, () => {
  console.log(`Server is running on port ${port}`);
});
const mongoose = require('mongoose');
const Schema = mongoose.Schema;

const questionSchema = new Schema({
  questionText: { type: String, required: true },
  options: [{ text: String, isCorrect: Boolean }],
});

mongoose.model('Question', questionSchema);
const mongoose = require('mongoose');
const Schema = mongoose.Schema;

const userSchema = new Schema({
  username: { type: String, required: true, unique: true },
  points: { type: Number, default: 0 },
});

mongoose.model('User', userSchema);
const express = require('express');
const mongoose = require('mongoose');
const router = express.Router();

const Question = mongoose.model('Question');
const User = mongoose.model('User');

// クイズの質問を取得
router.get('/questions', async (req, res) => {
  const questions = await Question.find();
  res.json(questions);
});

// ユーザー情報を取得
router.get('/users/:username', async (req, res) => {
  const user = await User.findOne({ username: req.params.username });
  res.json(user);
});

// ユーザーのポイントを更新
router.post('/users/:username/points', async (req, res) => {
  const user = await User.findOneAndUpdate(
    { username: req.params.username },
    { $inc: { points: req.body.points } },
    { new: true }
  );
  res.json(user);
});

module.exports = router;
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createStackNavigator } from '@react-navigation/stack';
import HomeScreen from './src/screens/HomeScreen';
import QuizScreen from './src/screens/QuizScreen';
import RankingScreen from './src/screens/RankingScreen';

const Stack = createStackNavigator();

export default function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator initialRouteName="Home">
        <Stack.Screen name="Home" component={HomeScreen} />
        <Stack.Screen name="Quiz" component={QuizScreen} />
        <Stack.Screen name="Ranking" component={RankingScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}
import React from 'react';
import { View, Text, Button, StyleSheet } from 'react-native';

export default function HomeScreen({ navigation }) {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>特殊詐欺クイズアプリへようこそ</Text>
      <Button
        title="クイズを始める"
        onPress={() => navigation.navigate('Quiz')}
      />
      <Button
        title="ランキングを見る"
        onPress={() => navigation.navigate('Ranking')}
      />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  title: {
    fontSize: 24,
    marginBottom: 20,
  },
});
import React, { useState, useEffect } from 'react';
import { View, Text, StyleSheet } from 'react-native';
import axios from 'axios';

export default function RankingScreen() {
  const [users, setUsers] = useState([]);

  useEffect(() => {
    async function fetchUsers() {
      const response = await axios.get('http://localhost:3000/api/users');
      setUsers(response.data);
    }
    fetchUsers();
  }, []);

  return (
    <View style={styles.container}>
      <Text style={styles.title}>ランキング</Text>
      {users.map((user, index) => (
        <Text key={index} style={styles.user}>
          {index + 1}. {user.username} - {user.points} ポイント
        </Text>
      ))}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  title: {
    fontSize: 24,
    marginBottom: 20,
  },
  user: {
    fontSize: 18,
    marginBottom: 10,
  },
});
